# A0147978E
###### /java/guitests/AddCommandTest.java
``` java
package guitests;

import static org.junit.Assert.assertTrue;

import java.util.List;

import org.junit.Test;

import com.google.common.collect.Lists;

import seedu.doerList.commons.core.Messages;
import seedu.doerList.commons.exceptions.IllegalValueException;
import seedu.doerList.logic.commands.AddCommand;
import seedu.doerList.model.category.BuildInCategoryList;
import seedu.doerList.testutil.TestCategory;
import seedu.doerList.testutil.TestTask;
import seedu.doerList.testutil.TypicalTestTasks;

public class AddCommandTest extends DoerListGuiTest {

    @Test
    public void add_tasks_successful() throws IllegalValueException {
        // define expected output
        List<TestCategory> expectedDisplayTaskPanel = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.DUE.categoryName, td.task9, td.task2),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, td.task3, td.task10),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, td.task11, td.task6),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, td.task12, td.task7),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task1, td.task4, td.task5, td.task8)
        );
        List<TestCategory> expectedBuildInCategoryList = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName, 12),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 3),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 3),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 3),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 4)
        );
        List<TestCategory> expectedCategoryList = Lists.newArrayList(
                new TestCategory("CS2101", 2),
                new TestCategory("CS2103", 2),
                new TestCategory("MA1101R", 1),
                new TestCategory("Urgent", 1),
                new TestCategory("Life", 1)
        );
        // add tasks at once
        commandBox.runCommand(TypicalTestTasks.task9.getAddCommand());
        commandBox.runCommand(TypicalTestTasks.task10.getAddCommand());
        commandBox.runCommand(TypicalTestTasks.task11.getAddCommand());
        TestTask taskToAdd = TypicalTestTasks.task12;
        assertAddSuccess(taskToAdd, expectedDisplayTaskPanel, expectedBuildInCategoryList, expectedCategoryList);


        // add duplicate task no change
        commandBox.runCommand(TypicalTestTasks.task3.getAddCommand());
        assertResultMessage(AddCommand.MESSAGE_DUPLICATE_TASK);
        assertTrue(categorySideBar.isBuildInCategoryListMatching(expectedBuildInCategoryList));
        assertTrue(categorySideBar.categoryListMatching(expectedCategoryList));
        assertTrue(taskListPanel.isListMatching(expectedDisplayTaskPanel));

        // add to empty todo list
        commandBox.runCommand("clear");
        List<TestCategory> expectedDisplayTaskPanel2 = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.DUE.categoryName, td.task2)
        );
        List<TestCategory> expectedBuildInCategoryList2 = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName, 1),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 0),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 0),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 0),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 0)
        );
        List<TestCategory> expectedCategoryList2 = Lists.newArrayList(
                new TestCategory("CS2101", 1),
                new TestCategory("CS2103", 1)
        );
        assertAddSuccess(td.task2, expectedDisplayTaskPanel2, expectedBuildInCategoryList2, expectedCategoryList2);
              
        // invalid command
        commandBox.runCommand("adds Do Homework");
        assertResultMessage(Messages.MESSAGE_UNKNOWN_COMMAND);
    }
    

    /**
     * Validating the given task has been successfully added.
     * Validating the rest of data has been updated accordingly
     * 
     * @param taskToAdd
     * @param expectedDisplayTaskPanel
     * @param expectedBuildInCategoryList
     * @param expectedCategoryList
     */
    private void assertAddSuccess(TestTask taskToAdd, 
            List<TestCategory> expectedDisplayTaskPanel, 
            List<TestCategory> expectedBuildInCategoryList, 
            List<TestCategory> expectedCategoryList) {
        
        commandBox.runCommand(taskToAdd.getAddCommand());
        assertResultMessage(String.format(AddCommand.MESSAGE_SUCCESS, taskToAdd));
        
        // confirm the list now contains accurate buildInCategory and count
        assertTrue(categorySideBar.isBuildInCategoryListMatching(expectedBuildInCategoryList));
        // confirm the list now contains accurate category and count
        assertTrue(categorySideBar.categoryListMatching(expectedCategoryList));
        
        // confirm the list now contains all tasks
        assertTrue(taskListPanel.isListMatching(expectedDisplayTaskPanel));
    }

}
```
###### /java/guitests/DeleteCommandTest.java
``` java
package guitests;

import static org.junit.Assert.assertTrue;

import java.util.List;

import org.junit.Test;

import com.google.common.collect.Lists;

import seedu.doerList.commons.core.Messages;
import seedu.doerList.commons.exceptions.IllegalValueException;
import seedu.doerList.logic.commands.DeleteCommand;
import seedu.doerList.model.category.BuildInCategoryList;
import seedu.doerList.testutil.TestCategory;
import seedu.doerList.testutil.TestTask;

public class DeleteCommandTest extends DoerListGuiTest {

    @Test
    public void delete() throws IllegalValueException {

        // delete the first in the list
        int targetIndex = 1;
        commandBox.runCommand("delete " + targetIndex);

        // delete the last in the list
        targetIndex = 7;
        commandBox.runCommand("delete " + targetIndex);

        // add task
        commandBox.runCommand(td.task10.getAddCommand());
        
        // delete from the middle of the list
        // generate expected output
        List<TestCategory> expectedDisplayTaskPanel = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.TODAY.categoryName, td.task3, td.task10),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, td.task6),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, td.task7),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task4, td.task5)
        );
        List<TestCategory> expectedBuildInCategoryList = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName, 6),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 3),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 2),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 1),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 2)
        );
        List<TestCategory> expectedCategoryList = Lists.newArrayList(
                new TestCategory("CS2101", 1),
                new TestCategory("CS2103", 1),
                new TestCategory("MA1101R", 1)
        );
        targetIndex = 5;
        assertDeleteSuccess(targetIndex, td.task1, expectedDisplayTaskPanel, expectedBuildInCategoryList, expectedCategoryList);
        

        // invalid index
        commandBox.runCommand("delete 7");
        assertResultMessage(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);

    }
    
    /**
     * Validating the given task has been successfully deleted.
     * Validating the rest of data has been updated accordingly
     * 
     * @param targetIndexOneIndexed
     * @param deletedTask
     * @param expectedDisplayTaskPanel
     * @param expectedBuildInCategoryList
     * @param expectedCategoryList
     */
    private void assertDeleteSuccess(int targetIndexOneIndexed, TestTask deletedTask,
            List<TestCategory> expectedDisplayTaskPanel, 
            List<TestCategory> expectedBuildInCategoryList, 
            List<TestCategory> expectedCategoryList) {
        
        commandBox.runCommand("delete " + targetIndexOneIndexed);
        assertResultMessage(String.format(DeleteCommand.MESSAGE_DELETE_TASK_SUCCESS, deletedTask));
        
        // confirm the list now contains accurate buildInCategory and count
        assertTrue(categorySideBar.isBuildInCategoryListMatching(expectedBuildInCategoryList));
        // confirm the list now contains accurate category and count
        assertTrue(categorySideBar.categoryListMatching(expectedCategoryList));
        
        // confirm the list now contains all tasks
        assertTrue(taskListPanel.isListMatching(expectedDisplayTaskPanel));  
    }

}
```
###### /java/guitests/EditCommandTest.java
``` java
package guitests;

import static org.junit.Assert.assertTrue;
import static seedu.doerList.commons.core.Messages.MESSAGE_INVALID_COMMAND_FORMAT;

import java.util.List;

import org.joda.time.DateTime;
import org.junit.Test;

import com.google.common.collect.Lists;

import seedu.doerList.commons.core.Messages;
import seedu.doerList.commons.exceptions.IllegalValueException;
import seedu.doerList.logic.commands.EditCommand;
import seedu.doerList.model.category.BuildInCategoryList;
import seedu.doerList.model.category.Category;
import seedu.doerList.model.category.UniqueCategoryList;
import seedu.doerList.model.task.Description;
import seedu.doerList.model.task.Title;
import seedu.doerList.model.task.TodoTime;
import seedu.doerList.testutil.TestCategory;
import seedu.doerList.testutil.TestTask;

public class EditCommandTest extends DoerListGuiTest {

    @Test
    public void edit() throws IllegalValueException {
        // edit the first one in the list
        TestTask afterEdition = new TestTask(td.task2);
        afterEdition.setTitle(new Title("Test Task 2 Edit Title"));
        afterEdition.setDescription(new Description("Test Task 2 Edit Description"));
        afterEdition.setStartTime(new TodoTime(new DateTime().withHourOfDay(10).withMinuteOfHour(0)));
        afterEdition.setEndTime(new TodoTime(new DateTime().withHourOfDay(13).withMinuteOfHour(0)));
        afterEdition.setCategories(new UniqueCategoryList(new Category("CS2103")));
        
        // expected output
        List<TestCategory> expectedDisplayTaskPanel = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.TODAY.categoryName, td.task3, afterEdition),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, td.task6),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, td.task7),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task1, td.task4, td.task5, td.task8)
        );
        List<TestCategory> expectedBuildInCategoryList = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName, 8),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 3),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 2),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 2),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 4)
        );
        List<TestCategory> expectedCategoryList = Lists.newArrayList(
                new TestCategory("CS2101", 1),
                new TestCategory("CS2103", 1),
                new TestCategory("MA1101R", 1)
        );
        assertEditSuccess("edit 1 /t Test Task 2 Edit Title /d Test Task 2 Edit Description /s today 10am /e today 1pm /c CS2103", 
                td.task2, afterEdition, expectedDisplayTaskPanel, 
                expectedBuildInCategoryList, expectedCategoryList);
        
       
        // edit task result in duplicate
        commandBox.runCommand(afterEdition.getEditCommand(1));
        assertResultMessage(EditCommand.MESSAGE_DUPLICATE_TASK);
        assertTrue(taskListPanel.isListMatching(expectedDisplayTaskPanel));

        // edit to empty list
        commandBox.runCommand("clear");
        commandBox.runCommand(td.task8.getEditCommand(1));
        assertResultMessage(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);

        // invalid command
        commandBox.runCommand("edit Do Homework");
        assertResultMessage(String.format(MESSAGE_INVALID_COMMAND_FORMAT, EditCommand.MESSAGE_USAGE));
    }
    
    /**
     * Validating the given task has been successfully edited.
     * Validating the rest of data has been updated accordingly
     * 
     * @param command
     * @param toEdit
     * @param afterEdit
     * @param expectedDisplayTaskPanel
     * @param expectedBuildInCategoryList
     * @param expectedCategoryList
     */
    private void assertEditSuccess(String command, TestTask toEdit, TestTask afterEdit,
            List<TestCategory> expectedDisplayTaskPanel, 
            List<TestCategory> expectedBuildInCategoryList, 
            List<TestCategory> expectedCategoryList) {
        
        commandBox.runCommand(command);
        assertResultMessage(String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, toEdit, afterEdit));
        
        // confirm the list now contains accurate buildInCategory and count
        assertTrue(categorySideBar.isBuildInCategoryListMatching(expectedBuildInCategoryList));
        // confirm the list now contains accurate category and count
        assertTrue(categorySideBar.categoryListMatching(expectedCategoryList));
        
        // confirm the list now contains all tasks
        assertTrue(taskListPanel.isListMatching(expectedDisplayTaskPanel));  
    }

}
```
###### /java/guitests/FindCommandTest.java
``` java
package guitests;

import static org.junit.Assert.assertTrue;

import java.util.List;

import org.junit.Test;

import com.google.common.collect.Lists;

import seedu.doerList.commons.core.Messages;
import seedu.doerList.commons.exceptions.IllegalValueException;
import seedu.doerList.logic.commands.Command;
import seedu.doerList.model.category.BuildInCategoryList;
import seedu.doerList.testutil.TestCategory;

public class FindCommandTest extends DoerListGuiTest {

    @Test
    public void find_nonEmptyList() throws IllegalValueException {
        // find get multiple results
        List<TestCategory> expectedDisplayTaskPanel = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.DUE.categoryName, td.task2),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, td.task6),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, td.task7),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task8)
        );
        List<TestCategory> expectedBuildInCategoryList = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName + " (filtered)", 4),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 2),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 2),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 2),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 4)
        );
        List<TestCategory> expectedCategoryList = Lists.newArrayList(
                new TestCategory("CS2101", 2),
                new TestCategory("CS2103", 1),
                new TestCategory("MA1101R", 1)
        );
        assertFindResult("find Math", expectedDisplayTaskPanel, expectedBuildInCategoryList, expectedCategoryList);
        
        // find and there is no result
        expectedBuildInCategoryList.get(0).setExpectedNumTasks(0);
        assertFindResult("find Love", Lists.newArrayList(), expectedBuildInCategoryList, expectedCategoryList);
        

        //find after deleting one result
        commandBox.runCommand("find Math");
        commandBox.runCommand("delete 1");
        expectedBuildInCategoryList.get(0).setExpectedNumTasks(3);
        List<TestCategory> expectedDisplayTaskPanel2 = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.NEXT.categoryName, td.task6),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, td.task7),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task8)
        );
        List<TestCategory> expectedCategoryList2 = Lists.newArrayList(
                new TestCategory("CS2101", 1),
                new TestCategory("CS2103", 0),
                new TestCategory("MA1101R", 1)
        );
        assertFindResult("find Math", expectedDisplayTaskPanel2, expectedBuildInCategoryList, expectedCategoryList2);
    }

    @Test
    public void find_emptyList() throws IllegalValueException{
        commandBox.runCommand("clear");
        List<TestCategory> expectedDisplayTaskPanel = Lists.newArrayList();
        List<TestCategory> expectedBuildInCategoryList = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName + " (filtered)", 0),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 0),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 0),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 0),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 0)
        );
        List<TestCategory> expectedCategoryList = Lists.newArrayList();
        assertFindResult("find CA", expectedDisplayTaskPanel, expectedBuildInCategoryList, expectedCategoryList); //no results
    }

    @Test
    public void find_invalidCommand_fail() throws IllegalValueException {
        commandBox.runCommand("findgeorge");
        assertResultMessage(Messages.MESSAGE_UNKNOWN_COMMAND);
    }
    
    /**
     * Validating the tasks with `keyword` have been listed
     * Validating the rest of data has been updated accordingly
     * 
     * @param command
     * @param expectedDisplayTaskPanel
     * @param expectedBuildInCategoryList
     * @param expectedCategoryList
     */
    private void assertFindResult(String command, 
            List<TestCategory> expectedDisplayTaskPanel, 
            List<TestCategory> expectedBuildInCategoryList, 
            List<TestCategory> expectedCategoryList) {
        
        commandBox.runCommand(command);
        int numTasks = expectedDisplayTaskPanel.stream().mapToInt((c) -> c.getPreDefinedTasks().size()).sum();
        assertResultMessage(Command.getMessageForTaskListShownSummary(numTasks));
        
        // confirm the list now contains accurate buildInCategory and count
        assertTrue(categorySideBar.isBuildInCategoryListMatching(expectedBuildInCategoryList));
        // confirm the list now contains accurate category and count
        assertTrue(categorySideBar.categoryListMatching(expectedCategoryList));
        
        // confirm the list now contains all tasks
        assertTrue(taskListPanel.isListMatching(expectedDisplayTaskPanel)); 
    }
}
```
###### /java/guitests/guihandles/CategoryCardHandle.java
``` java
package guitests.guihandles;

import guitests.GuiRobot;
import javafx.scene.Node;
import javafx.stage.Stage;
import seedu.doerList.model.category.Category;
import seedu.doerList.testutil.TestCategory;

/**
 * Provides a handle to a category card in the task list panel.
 */
public class CategoryCardHandle extends GuiHandle {
    /** Some fields id in the UI. These IDs can be find in {@code /src/main/resources/view/*.fxml} */
    private static final String CATEGORY_NAME_FIELD_ID = "categoryName";
    private static final String CATEGORY_COUNT_FIELD_ID = "categoryCount";

    private Node node;

    public CategoryCardHandle(GuiRobot guiRobot, Stage primaryStage, Node node){
        super(guiRobot, primaryStage, null);
        this.node = node;
    }

    protected String getTextFromLabel(String fieldId) {
        return getTextFromLabel(fieldId, node);
    }
    
    protected String getContentFromText(String fieldId) { 
        return getTextFromText(fieldId, node);
    }

    public String getCategoryName() {
        return getTextFromLabel("#" + CATEGORY_NAME_FIELD_ID);
    }

    public String getCategoryCount() {
        return getTextFromLabel("#" + CATEGORY_COUNT_FIELD_ID);
    }
    
    public boolean isSameTestCategory(TestCategory category){
        return getCategoryName().equals(category.categoryName)
                && getCategoryCount().equals(String.valueOf(category.expectedNumTasks));
    }
    
    public boolean isSameCategoryName(Category category){
        return getCategoryName().equals(category.categoryName);
    }

    @Override
    public boolean equals(Object obj) {
        if(obj instanceof CategoryCardHandle) {
            CategoryCardHandle handle = (CategoryCardHandle) obj;
            return getCategoryName().equals(handle.getCategoryName())
                    && getCategoryCount().equals(handle.getCategoryCount());
        }
        return super.equals(obj);
    }

    @Override
    public String toString() {
        return "[" + getCategoryName() + "]" + "(" + getCategoryCount() + ")";             
    }
}
```
###### /java/guitests/guihandles/CategorySideBarHandle.java
``` java
package guitests.guihandles;

import static org.junit.Assert.assertTrue;

import java.util.List;
import java.util.Optional;
import java.util.Set;

import guitests.GuiRobot;
import javafx.scene.Node;
import javafx.scene.control.ListView;
import javafx.stage.Stage;
import seedu.doerList.model.category.Category;
import seedu.doerList.testutil.TestCategory;
import seedu.doerList.testutil.TestUtil;

/**
 * Provides a handle to all two category in the system.
 */
public class CategorySideBarHandle extends GuiHandle {
    /** Some fields id in the UI. These IDs can be find in {@code /src/main/resources/view/*.fxml} */
    private static final String BUILD_IN_CATEGORY_PLACEHOLDER_ID = "buildInCategoryListPanelPlaceholder";
    private static final String CATEGORY_PLACEHOLDER_ID = "categoryListPanelPlaceholder";
    private static final String CATEGORY_LIST_VIEW = "categoryListView";
    private static final String CATEGORY_CARD_PANE = "categoryCardPane";


    public CategorySideBarHandle(GuiRobot guiRobot, Stage primaryStage){
        super(guiRobot, primaryStage, null);
    }

    public ListView<Category> getBuidInCategoryListView() {
        return (ListView<Category>) guiRobot.from(getNode("#" + BUILD_IN_CATEGORY_PLACEHOLDER_ID))
                .lookup("#" + CATEGORY_LIST_VIEW).query();
    }
    
    public ListView<Category> getCategoryListView() {
        return (ListView<Category>) guiRobot.from(getNode("#" + CATEGORY_PLACEHOLDER_ID))
                .lookup("#" + CATEGORY_LIST_VIEW).query();
    }

    /**
     * Get current selection in the category, including BuildInCategory Listview and Category Listview.
     * 
     * @param categoryName
     * @return CategoryCardHandle represent the selected category card
     */
    public CategoryCardHandle getSelection(String categoryName) {
        List<Category> buildInCategoryList = getBuidInCategoryListView().getSelectionModel().getSelectedItems();
        List<Category> categoryList = getCategoryListView().getSelectionModel().getSelectedItems();
        if (buildInCategoryList.size() == 1 && categoryList.size() == 0) {
            return getCategoryCardHandleByName(getBuidInCategoryListView(), buildInCategoryList.get(0));
        } else if (buildInCategoryList.size() == 0 && categoryList.size() == 1){
            return getCategoryCardHandleByName(getCategoryListView(), categoryList.get(0));
        } else if (buildInCategoryList.size() != 0 && categoryList.size() != 0) {
            throw new IllegalArgumentException("Two selections exist in the categorySideBar");
        } else {
            return null;
        }
    }

    public boolean isBuildInCategoryListMatching(List<TestCategory> expectedBuildInCategoryList) {
        return this.isListMatching(getBuidInCategoryListView(), 0, expectedBuildInCategoryList);
    }

    public boolean categoryListMatching(List<TestCategory> expectedCateogires) {
        return this.isListMatching(getCategoryListView(), 0, expectedCateogires);
    }
    
    /**
     * Returns true if the list is showing the category details correctly and in correct order.
     * 
     * @param startPosition The starting position of the sub list.
     * @param persons A list of person in the correct order.
     * @param boolean
     */
    public boolean isListMatching(ListView<Category> listView, int startPosition, List<TestCategory> categories) throws IllegalArgumentException {
        if (categories.size() + startPosition != listView.getItems().size()) {
            throw new IllegalArgumentException("List size mismatched\n" +
                    "Expected " + (listView.getItems().size() - 1) + " persons");
        }
        // verify binding data contains in order
        assertTrue(this.containsInOrder(listView, startPosition, categories));
        // verify displaying data
        for (int i = 0; i < categories.size(); i++) {
            final int scrollTo = i;
            guiRobot.interact(() -> {
                listView.scrollTo(scrollTo); // if the scrollbar is hidden, this will be error in log, but it doesn't matter
            });
            guiRobot.sleep(200);
            if (!TestUtil.compareCardAndTestCategory(getCategoryCardHandleByName(listView, categories.get(i)), categories.get(i))) {
                return false;
            }
        }
        return true;
    }
    
    public CategoryCardHandle getCategoryCardHandleByName(ListView<Category> listView, Category category) {
        Set<Node> nodes = getAllCardNodesFrom(listView);
        Optional<Node> personCardNode = nodes.stream()
                .filter(n -> new CategoryCardHandle(guiRobot, primaryStage, n).isSameCategoryName(category))
                .findFirst();
        if (personCardNode.isPresent()) {
            return new CategoryCardHandle(guiRobot, primaryStage, personCardNode.get());
        } else {
            return null;
        }
    }
    
    protected Set<Node> getAllCardNodesFrom(ListView<Category> listview) {
        return guiRobot.from(listview).lookup("#" + CATEGORY_CARD_PANE).queryAll();
    }
    
    /**
     * Check whether the provided categories is in the same order 
     * as the one in the listView from the startPosition.
     * 
     * @param listView
     * @param startPosition
     * @param categories
     * @return boolean
     */
    public boolean containsInOrder(ListView<Category> listView, int startPosition, List<TestCategory> categories) {
        List<Category> categoriesInList = listView.getItems();

        // Return false if the list in panel is too short to contain the given list
        if (startPosition + categories.size() > categoriesInList.size()){
            return false;
        }

        // Return false if any of the category doesn't match
        for (int i = 0; i < categories.size(); i++) {
            if (!categoriesInList.get(startPosition + i).categoryName.equals(categories.get(i).categoryName)) {
                return false;
            }
        }

        return true;
    }
}
```
###### /java/guitests/guihandles/SectionPanelHandle.java
``` java
package guitests.guihandles;
import java.util.List;
import java.util.Optional;
import java.util.Set;
import java.util.stream.Stream;

import guitests.GuiRobot;
import javafx.scene.Node;
import javafx.stage.Stage;
import seedu.doerList.model.category.Category;
import seedu.doerList.model.task.ReadOnlyTask;
import seedu.doerList.testutil.TestTask;
import seedu.doerList.ui.TaskListPanel;

/**
 * Provides a handle to section in the tasklist.
 */
public class SectionPanelHandle extends GuiHandle {
    /** Some fields id in the UI. These IDs can be find in {@code /src/main/resources/view/*.fxml} */
    public static final String SECTION_HEADER_ID = "titleField";
    public static final String CARD_PANE_ID = "taskPanel";  
    public static final String TASK_LIST_SCROLLPANE = "tasksScrollPane";
    
    private Node node;

    public SectionPanelHandle(GuiRobot guiRobot, Stage primaryStage, Node node){
        super(guiRobot, primaryStage, null);
        this.node = node;
    }

    protected String getTextFromLabel(String fieldId) {
        return getTextFromLabel(fieldId, node);
    }

    public String getHeaderTitle() {
        return getTextFromLabel("#" + SECTION_HEADER_ID);
    }   

    /**
     * Determine whether this handle represents the same category as the parameter.
     * 
     * @param c the expected category
     * @return boolean
     */
    public boolean isSameCategory(Category c){
        return c.categoryName.equals(this.getHeaderTitle());
    }
    
    protected int getNumTaskNode() {
        return getAllCardNodes().size();
    }
    
    protected Set<Node> getAllCardNodes() {
        return guiRobot.from(node).lookup("#" + CARD_PANE_ID).queryAll();
    }
    
    protected Optional<Node> getTaskNodeByTitle(String title) {
        return getAllCardNodes().stream().filter((n) -> {
            TaskCardHandle tempHandle =  new TaskCardHandle(guiRobot, primaryStage, n);
            return tempHandle.getFullTitle().equals(title);
        }).findAny();
    }

    /**
     * Get the taskCardHandle which represents the parameter {@code task}.
     * If the there is no such task in the current UI, the method will return {@code null}.
     * 
     * @param task
     * @return TaskCardHandle
     */
    public TaskCardHandle getTaskCardHandle(ReadOnlyTask task) {
        Set<Node> nodes = getAllCardNodes();
        Stream<Node> taskCardStream = nodes.stream()
                .filter(n -> new TaskCardHandle(guiRobot, primaryStage, n).isSameTask(task));
        Optional<Node> taskCardNode = taskCardStream.findFirst();
        if (taskCardNode.isPresent()) {
            return new TaskCardHandle(guiRobot, primaryStage, taskCardNode.get());
        } else {
            return null;
        }
    }
    

    /**
     * Return true if the tasks displayed in UI is in the same order as the parameter {@code tasks}.
     * {@code indexStart} indicates that the tasks should start from the index.
     * 
     * @param tasks
     * @param indexStart
     * @return boolean
     * @throws IllegalArgumentException
     */
    public boolean isListMatching(List<TestTask> tasks, int indexStart) throws IllegalArgumentException {
        if (tasks.size() != getNumTaskNode()) {
            throw new IllegalArgumentException("List size mismatched\n" +
                    "Expected " + getNumTaskNode() + " tasks");
        }
        for (int i = 0; i < tasks.size(); i++) {
            // navigate to the task
            Optional<Node> nodeOp = getTaskNodeByTitle(tasks.get(i).getTitle().fullTitle);
            if (!nodeOp.isPresent()) {
                return false;
            }
            final int scrollTo = i + indexStart;
            guiRobot.interact(() -> getTaskListPanelController().scrollTo(scrollTo));
            guiRobot.sleep(200);
            // get the tasks panel inside the section if any
            TaskCardHandle tch = this.getTaskCardHandle(tasks.get(i));
            if (tch == null) {
                // if cannot find, the information is not correct
                return false;
            } else {
                // validate the index to make sure it is in correct order
                if (!tch.getDisplayIndex().equals(String.valueOf(i + indexStart))) {
                    return false;
                }
            }
        }
        return true;
    }

    @Override
    public boolean equals(Object obj) {
        if(obj instanceof SectionPanelHandle) {
            SectionPanelHandle handle = (SectionPanelHandle) obj;
            return getHeaderTitle().equals(handle.getHeaderTitle());
        }
        return super.equals(obj);
    }

    @Override
    public String toString() {
        return "__" + getHeaderTitle() + "__";
                
    }
    
    /**
     * Get the controller of the TaskListPanel in the current UI.
     * This is implemented by using {@code getUserData()} of a {@code node} in the UI.
     * 
     * @return TaskListPanel
     */
    public TaskListPanel getTaskListPanelController() {
        TaskListPanel taskPaneController = (TaskListPanel)guiRobot.lookup("#" + TASK_LIST_SCROLLPANE).query().getUserData();
        return taskPaneController;
    }
}
```
###### /java/guitests/guihandles/TaskCardHandle.java
``` java
package guitests.guihandles;

import guitests.GuiRobot;
import javafx.scene.Node;
import javafx.stage.Stage;
import seedu.doerList.model.task.ReadOnlyTask;
import seedu.doerList.ui.TaskCard;

/**
 * Provides a handle to a task card in the task list panel.
 */
public class TaskCardHandle extends GuiHandle {
    /** Some fields id in the UI. These IDs can be find in {@code /src/main/resources/view/*.fxml} */
    private static final String TITLE_FIELD_ID = "title";
    private static final String INDEX_FIELD_ID = "index";
    
    private Node node;

    public TaskCardHandle(GuiRobot guiRobot, Stage primaryStage, Node node){
        super(guiRobot, primaryStage, null);
        this.node = node;
    }

    protected String getTextFromLabel(String fieldId) {
        return getTextFromLabel(fieldId, node);
    }
    
    protected String getContentFromText(String fieldId) { 
        return getTextFromText(fieldId, node);
    }

    public String getFullTitle() {
        return getTextFromLabel("#" + TITLE_FIELD_ID);
    }

    public String getDisplayIndex() {
        return getTextFromLabel("#" + INDEX_FIELD_ID);
    }
    
    public String getDescription() {
        return getContentFromText("#" + TaskCard.DESCRIPTION_FIELD_ID);
    }

    public String getTime() {
        return getContentFromText("#" + TaskCard.TIME_FIELD_ID);
    }
    
    /**
     * Check whether the TaskCard represents the same task as it in the parameter {@code task}.
     * 
     * @param task
     * @return boolean
     */
    public boolean isSameTask(ReadOnlyTask task){
        return task.getTitle().fullTitle.equals(this.getFullTitle())
                && (!task.hasDescription() || task.getDescription().value.equals(this.getDescription()))
                && (task.isFloatingTask() || task.getTime().equals(this.getTime()));
    }

    @Override
    public boolean equals(Object obj) {
        if(obj instanceof TaskCardHandle) {
            TaskCardHandle handle = (TaskCardHandle) obj;
            return getFullTitle().equals(handle.getFullTitle())
                    && getDescription().equals(handle.getDescription())
                    && getTime().equals(handle.getTime());
        }
        return super.equals(obj);
    }

    @Override
    public String toString() {
        return getFullTitle() + " " 
                + getDescription() + " " 
                + getTime() + " ";
                
    }
}
```
###### /java/guitests/guihandles/TaskListPanelHandle.java
``` java
package guitests.guihandles;

import java.util.List;
import java.util.Optional;
import java.util.Set;
import java.util.stream.Stream;

import guitests.GuiRobot;
import javafx.geometry.Point2D;
import javafx.scene.Node;
import javafx.scene.input.KeyCode;
import javafx.stage.Stage;
import seedu.doerList.TestApp;
import seedu.doerList.testutil.TestCategory;
import seedu.doerList.testutil.TestUtil;

/**
 * Provides a handle for the panel containing the person list.
 */
public class TaskListPanelHandle extends GuiHandle {
    /** Some fields id in the UI. These IDs can be find in {@code /src/main/resources/view/*.fxml} */
    public static final String SECTION_PANE_ID = "sectionPanel";
    public static final String TASK_PANE_ID = "tasksScrollPane";

    public TaskListPanelHandle(GuiRobot guiRobot, Stage primaryStage) {
        super(guiRobot, primaryStage, TestApp.APP_TITLE);
    }   
    
    /**
     * Clicks on the ListView.
     */
    public void clickOnMidOfTaskPanel(int height) {
        Point2D point= TestUtil.getScreenTopMidPoint(guiRobot.lookup("#" + TASK_PANE_ID).query(), height);
        guiRobot.clickOn(point.getX(), point.getY());
        guiRobot.sleep(200);
    }
    
    /**
     * Press the {@code KeyCode.UP} key in the keyboard.
     */
    public void useUpArrowKey() {
        guiRobot.type(KeyCode.UP).sleep(500);
    }
    
    /**
     * Press the {@code KeyCode.DOWN} key in the keyboard.
     */
    public void useDownArrowKey() {
        guiRobot.type(KeyCode.DOWN).sleep(500);
    }
    
    /**
     * Get a sectionPanelHandle that represents the given {@code targetCategory}.
     * If there is not such {@code targetCategory} in current GUI, {@code null} will be returned.
     * 
     * @param targetCategory
     * @return SectionPanelHandle
     */
    public SectionPanelHandle getSectionPanelHandle(TestCategory targetCategory) {
        Set<Node> nodes = getAllSectionPanel();
        Stream<Node> sectionPanelStream = nodes.stream()
                .filter(n -> new SectionPanelHandle(guiRobot, primaryStage, n).isSameCategory(targetCategory));
        Optional<Node> sectionPanelNode = sectionPanelStream.findFirst();
        if (sectionPanelNode.isPresent()) {
            return new SectionPanelHandle(guiRobot, primaryStage, sectionPanelNode.get());
        } else {
            return null;
        }
    }
    
    protected Set<Node> getAllSectionPanel() {
        return guiRobot.lookup("#" + SECTION_PANE_ID).queryAll();
    }
       
    public int getNumberOfSectionPanel() {
        return getAllSectionPanel().size();
    }

    /**
     * Check whether the tasks, which are categorized by BuildInCategory, 
     * display in the same order as {@code expectedCategorized}.
     * 
     * @param expectedCategorized
     * @return boolean
     */
    public boolean isListMatching(List<TestCategory> expectedCategorized) {
        int indexStart = 1;
        for(TestCategory c : expectedCategorized) {
            SectionPanelHandle panel = getSectionPanelHandle(c);
            if (panel == null) {
                return false;
            } else {
                panel.isListMatching(c.getPreDefinedTasks(), indexStart);
            }
            indexStart += c.getPreDefinedTasks().size();
        }
        return true;
    }

}
```
###### /java/guitests/ListCommandTest.java
``` java
package guitests;

import static org.junit.Assert.assertTrue;

import java.util.List;

import org.junit.Test;

import com.google.common.collect.Lists;

import seedu.doerList.commons.exceptions.IllegalValueException;
import seedu.doerList.logic.commands.ListCommand;
import seedu.doerList.model.category.BuildInCategoryList;
import seedu.doerList.model.category.Category;
import seedu.doerList.testutil.TestCategory;

public class ListCommandTest extends DoerListGuiTest {

    @Test
    public void list() throws IllegalValueException {
        // generate exptected result
        List<TestCategory> expectedBuildInCategoryList = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName, 8),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 2),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 2),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 2),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 4)
        );
        List<TestCategory> expectedCategoryList = Lists.newArrayList(
                new TestCategory("CS2101", 2),
                new TestCategory("CS2103", 1),
                new TestCategory("MA1101R", 1)
        );
        
        // list ALL
        List<TestCategory> expected_ALL = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.DUE.categoryName, td.task2),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, td.task3),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, td.task6),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, td.task7),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task1, td.task4, td.task5, td.task8)
        );
        assertListSuccess(BuildInCategoryList.ALL, expected_ALL, expectedBuildInCategoryList, expectedCategoryList);
        
        // list Today
        List<TestCategory> expected_TODAY = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.TODAY.categoryName, td.task3),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task4)
        );
        assertListSuccess(BuildInCategoryList.TODAY, expected_TODAY, expectedBuildInCategoryList, expectedCategoryList);
        
        // list NEXT
        List<TestCategory> expected_NEXT = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.NEXT.categoryName, td.task6),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task5)
        );
        assertListSuccess(BuildInCategoryList.NEXT, expected_NEXT, expectedBuildInCategoryList, expectedCategoryList);
        
        // list INBOX
        List<TestCategory> expected_INBOX = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.INBOX.categoryName, td.task7),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task8)
        );
        assertListSuccess(BuildInCategoryList.INBOX, expected_INBOX, expectedBuildInCategoryList, expectedCategoryList);
        
        // list COMPLETE
        List<TestCategory> expected_COMPLETE = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task1, td.task4, td.task5, td.task8)
        );
        assertListSuccess(BuildInCategoryList.COMPLETE, expected_COMPLETE, expectedBuildInCategoryList, expectedCategoryList);
        
        // list CS2101
        List<TestCategory> expected_CS2101 = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.DUE.categoryName, td.task2),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, td.task3)
        );
        assertListSuccess(new Category("CS2101"), expected_CS2101, expectedBuildInCategoryList, expectedCategoryList);
        
        // list CS2103
        List<TestCategory> expected_CS2103 = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.DUE.categoryName, td.task2)
        );
        assertListSuccess(new Category("CS2103"), expected_CS2103, expectedBuildInCategoryList, expectedCategoryList);
        
        // list MA1101R
        List<TestCategory> expected_MA1101R = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task4)
        );
        assertListSuccess(new Category("MA1101R"), expected_MA1101R, expectedBuildInCategoryList, expectedCategoryList);
           
    }
    
    @Test
    public void list_afterRunAddCommand() throws IllegalValueException {
        // expected result
        List<TestCategory> expectedCategoryList = Lists.newArrayList(
                new TestCategory("CS2101", 2),
                new TestCategory("CS2103", 1),
                new TestCategory("MA1101R", 1)
        );
        List<TestCategory> expectedBuildInCategoryList = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName, 8),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 2),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 2),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 2),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 4)
        );
        
        // list Today
        List<TestCategory> expected_TODAY = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.TODAY.categoryName, td.task3),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task4)
        );
        assertListSuccess(BuildInCategoryList.TODAY, expected_TODAY, expectedBuildInCategoryList, expectedCategoryList);
        
        // add task that should belong to `Today` category
        commandBox.runCommand(td.task10.getAddCommand());

        // expected result
        List<TestCategory> expectedBuildInCategoryList_after = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.ALL.categoryName, 9),
                new TestCategory(BuildInCategoryList.TODAY.categoryName, 3),
                new TestCategory(BuildInCategoryList.NEXT.categoryName, 2),
                new TestCategory(BuildInCategoryList.INBOX.categoryName, 2),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, 4)
        );
        List<TestCategory> expectedCategoryList_after = Lists.newArrayList(
                new TestCategory("CS2101", 2),
                new TestCategory("CS2103", 2),
                new TestCategory("MA1101R", 1)
        );
        // list Today again
        List<TestCategory> expected_TODAY_after = Lists.newArrayList(
                new TestCategory(BuildInCategoryList.TODAY.categoryName, td.task3, td.task10),
                new TestCategory(BuildInCategoryList.COMPLETE.categoryName, td.task4)
        );
        assertListSuccess(BuildInCategoryList.TODAY, expected_TODAY_after, expectedBuildInCategoryList_after, expectedCategoryList_after);
    }
    
    /**
     * Validating the tasks under specific category have been listed
     * Validating the rest of data has been updated accordingly
     * 
     * @param categoryToShow
     * @param expectedDisplayTaskPanel
     * @param expectedBuildInCategoryList
     * @param expectedCategoryList
     */
    private void assertListSuccess(Category categoryToShow, 
            List<TestCategory> expectedDisplayTaskPanel, 
            List<TestCategory> expectedBuildInCategoryList, 
            List<TestCategory> expectedCategoryList) {
        
        commandBox.runCommand("list " + categoryToShow.categoryName);
        assertResultMessage(String.format(ListCommand.MESSAGE_SUCCESS, categoryToShow.categoryName));
        
        // confirm the list now contains accurate buildInCategory and count
        assertTrue(categorySideBar.isBuildInCategoryListMatching(expectedBuildInCategoryList));
        // confirm the list now contains accurate category and count
        assertTrue(categorySideBar.categoryListMatching(expectedCategoryList));
        
        // confirm the list now contains all tasks
        assertTrue(taskListPanel.isListMatching(expectedDisplayTaskPanel));  
    }

}
```
###### /java/guitests/TaskPanelInteractionTest.java
``` java
package guitests;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;

import org.junit.Test;

import seedu.doerList.ui.TaskCard;

public class TaskPanelInteractionTest extends DoerListGuiTest {

    @Test
    public void press_arrowKey() {
        // press down to `scroll down`
        taskListPanel.clickOnMidOfTaskPanel(10);
        for(int i = 1; i<=8; i++) {
            taskListPanel.useDownArrowKey();
            assertTaskSelected(i);
        }
       
        // the last task is highlighted
        // press down again and there is no effect
        taskListPanel.useDownArrowKey();
        assertTaskSelected(8);
        
        // press up to `scroll up`
        for(int i = 7; i >= 1; i--) {
            taskListPanel.useUpArrowKey();
            assertTaskSelected(i);
        }
        
        // the first task is highlighted
        // press up again and there is no effect
        taskListPanel.useUpArrowKey();
        assertTaskSelected(1);
    }
    
    
    @Test
    public void click_TaskCardUI() {
        // click the first one
        taskListPanel.clickOnMidOfTaskPanel(55);
        assertTaskSelected(1);
    }
    
    /**
     * Validating the displayIndex in selected task in UI is the same as parameter.
     * 
     * @param index
     */
    private void assertTaskSelected(int index) {
        assertNotNull(TaskCard.getSeletedTaskCard());
        assertEquals(TaskCard.getSeletedTaskCard().getDisplayIndex(), index);
    }

}
```
